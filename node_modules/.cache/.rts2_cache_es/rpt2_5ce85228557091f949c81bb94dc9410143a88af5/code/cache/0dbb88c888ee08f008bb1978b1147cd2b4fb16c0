{"code":"function create(fun) {\r\n    const blob = new Blob([\"(\" + fun + \")()\"]);\r\n    const url = window.URL.createObjectURL(blob);\r\n    const worker = new Worker(url);\r\n    return worker;\r\n}\r\nexport const createWorker = (callback, time) => {\r\n    const pollingWorker = create(`function (e) {\n        setInterval(function () {\n          this.postMessage(null)\n        }, ${time})\n      }`);\r\n    pollingWorker.onmessage = callback;\r\n    return pollingWorker;\r\n};\r\nexport const stopWorker = (instance) => {\r\n    try {\r\n        instance && instance.terminate();\r\n    }\r\n    catch (err) {\r\n        console.log(err);\r\n    }\r\n};\r\n//# sourceMappingURL=worker.js.map","references":[],"map":"{\"version\":3,\"file\":\"worker.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/utils/worker.ts\"],\"names\":[],\"mappings\":\"AAAA,SAAS,MAAM,CAAC,GAAQ;IACpB,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC;IAC3C,MAAM,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IAC7C,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC;IAC/B,OAAO,MAAM,CAAC;AAChB,CAAC;AAED,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,QAAoB,EAAE,IAAY,EAAE,EAAE;IACjE,MAAM,aAAa,GAAG,MAAM,CAAC;;;aAGpB,IAAI;QACT,CAAC,CAAC;IACN,aAAa,CAAC,SAAS,GAAG,QAAQ,CAAC;IACnC,OAAO,aAAa,CAAC;AACvB,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,UAAU,GAAG,CAAC,QAAgB,EAAE,EAAE;IAC7C,IAAI;QACF,QAAQ,IAAI,QAAQ,CAAC,SAAS,EAAE,CAAC;KAClC;IAAC,OAAO,GAAG,EAAE;QACZ,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;KAClB;AACH,CAAC,CAAC\"}","dts":{"name":"/Users/chatfeed/projects/golang/weim-js-sdk/dist/utils/worker.d.ts","writeByteOrderMark":false,"text":"export declare const createWorker: (callback: () => void, time: number) => Worker;\r\nexport declare const stopWorker: (instance: Worker) => void;\r\n"}}
